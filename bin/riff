#!/usr/bin/env ruby

# Inspired by http://timelessrepo.com/making-ruby-gems
begin
  require 'riff'
rescue LoadError
  $LOAD_PATH.unshift "#{File.dirname(__FILE__)}/../lib"
  require 'riff'
end

refined = Riff.new().do_stream(STDIN)
if $stdout.isatty
  IO.popen('LESS=FRX less', 'w') { |pager| pager.print refined }
else
  print refined
end
